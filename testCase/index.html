<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, target-densitydpi=device-dpi"
    />
    <style>
        html {
            background: #111;
            font-family: Nanum Gothic
        }

        a:link {
            color: #fff;
            text-decoration: none
        }

        a:visited {
            color: #fff;
            text-decoration: none
        }

        hr {
            margin: 10px 6px 10px 6px
        }
    </style>
</head>

<body>
<script>
    (function () {
        var temp = window.location.href.split('/')
        var title = document.createElement('div')
        document.body.appendChild(title)
        title.style.cssText = 'color:#fff;margin-left:7px;font-size:32px;margin-top:15px;margin-bottom:20px'
        title.innerHTML = 'RedGL Test Suite'
    })()
</script>
<hr style="border:0px;border-top:1px solid #333">
<!-- <hr style="border:0px;border-top:1px solid #222"> -->
<div style="padding:10px;color:#fff">
    <div style="color:#fff;" id="totalTestCasePage"></div>
    <a href="https://redcamel.github.io/RedGL2/example">example</a> / <a
        href="https://redcamel.github.io/RedGL2/testCase">testCase</a> / <a
        href="https://redcamel.github.io/RedGL2/redDoc">document</a> / <a href="https://github.com/redcamel/RedGL2/">github</a>
    <div>This project is maintained by <a href="https://github.com/redcamel/">Redcamel</a></div>
</div>
<script>
    var len, testList;
    var index
    var pageNum = 0
    var totalTestCaseNumS = 0
    var totalTestCaseNumF = 0

    var iframeList = []
    testList = [
        "RedGL.html",
        //
        "RedScene.html",
        "RedView.html",
        "RedWorld.html",
        //
        "base/RedDefinePropertyInfo.html",
        //
        "program/RedShader.html",
        "program/RedProgram.html",
        //
        'geometry/RedInterleaveInfo.html',
        "geometry/RedBuffer.html",
        "geometry/RedGeometry.html",
        //
        "primitives/RedPlane.html",
        "primitives/RedBox.html",
        "primitives/RedSphere.html",
        //
        "base/RedBaseMaterial.html",
        "material/RedColorMaterial.html",
        "material/RedColorPhongMaterial.html",
        "material/RedColorPhongTextureMaterial.html",
        "material/RedBitmapMaterial.html",
        "material/RedStandardMaterial.html",
        "material/RedEnvironmentMaterial.html",
        "material/RedVideoMaterial.html",
        "material/RedColorPointCloudMaterial.html",
        "material/RedBitmapPointCloudMaterial.html",
        "material/RedParticleMaterial.html",
        //
        "base/RedBaseLight.html",
        "light/RedAmbientLight.html",
        "light/RedDirectionalLight.html",
        "light/RedPointLight.html",
        //
        "resources/RedBitmapTexture.html",
        "resources/RedBitmapCubeTexture.html",
        "resources/RedVideoTexture.html",
        //
        "base/RedBaseContainer.html",
        "object3D/RedMesh.html",
        "object3D/RedSprite3D.html",
        "object3D/RedSkyBox.html",
        "object3D/RedGrid.html",
        "object3D/RedLine.html",
        //
        "text/RedText.html",
        //
        // "particle/RedParticleEmitter.html",
        // "particle/RedPointCloud.html",
        //
        "frameBuffer/RedFrameBuffer.html",
        //
        "postEffect/RedPostEffectManager.html"
    ]
    len = testList.length;
    index = 0;
    var run = function () {
        var tFrame, tContainer, tTitle, tStyle;
        var v = testList[index]
        tContainer = document.createElement('span'),
            document.body.appendChild(tContainer),
            tStyle = tContainer.style,
            tStyle.float = "left",
            tStyle.height = "150px",
            tStyle.background = '#2c3239',
            tStyle.margin = "5px",
            tStyle.boxShadow = "5px 5px 20px rgba(0,0,0,0.3)",
            tTitle = document.createElement('button'),
            tContainer.appendChild(tTitle),
            tTitle.innerHTML = '<a href = "' + v + '"><div style="padding:15px">' + v.split('/')[v.split('/').length - 1] + '</div></a>',
            tStyle = tTitle.style,
            tStyle.display = 'block',
            tStyle.outline = 'none',
            tStyle.border = '0px',
            tStyle.width = '100%',
            tStyle.fontSize = '13px',
            tStyle.background = '#5b52aa',
            tStyle.font = "#333",
            tFrame = document.createElement('iframe'),
            tStyle = tFrame.style,
            tStyle.border = "0px",
            tStyle.width = '100%',
            tStyle.height = "103px",
            tContainer.appendChild(tFrame),
            tFrame.addEventListener('load', (function () {
                var t0 = v
                var frame = tFrame
                var title = tTitle
                var tDate
                return function () {
                    tDate = frame.contentDocument.lastModified
                    tDate = new Date(tDate)
                    tDate = tDate.getFullYear() + '.' + (tDate.getMonth() + 1) + '.' + tDate.getDate() + ' ' + tDate.getHours() + ':' + tDate.getMinutes()
                    title.innerHTML = '<a href = "' + t0 + '"><div style="padding:15px">' + t0.split('/')[t0.split('/').length - 1] + ' - <span style="color:#ccc;font-size:11px">' + tDate + '</span></div></a>'
                    index++
                    pageNum++
                    iframeList.push(frame.contentDocument)
                    if (index != len) requestAnimationFrame(run)
                    else clearInterval(tInterval)
                    document.getElementById('totalTestCasePage').innerHTML = 'TotalPageNum : ' + pageNum
                        + ' / totalTestCaseNum : <span style="color:rgb(242, 169, 113)">S</span> - '
                        + totalTestCaseNumS + ' <span style="color:red">F</span> - ' + totalTestCaseNumF;
                }
            })());
        tFrame.src = v
    }
    run()
    var tInterval = setInterval(function () {
        totalTestCaseNumS = 0
        totalTestCaseNumF = 0
        iframeList.forEach(function (v) {
            var t0 = v.querySelector('.suite_resultNumBox')
            var t1;
            if (t0) {
                t0 = t0.textContent
                t0 = t0.split('[')[1]
                if (t0) {
                    t1 = t0.split('/')
                    // 성공찾기
                    t0 = t1[0]
                    t0 = t0.split(':')[1]
                    t0 = t0.trim()
                    totalTestCaseNumS += parseInt(t0)
                    // 실패찾기
                    t0 = t1[1]
                    t0 = t0.split(']')[0]
                    t0 = t0.split(':')[1]
                    t0 = t0.trim()
                    totalTestCaseNumF += parseInt(t0)
                }
            }
        })
        document.getElementById('totalTestCasePage').innerHTML = 'TotalPageNum : ' + pageNum
            + ' / totalTestCaseNum : <span style="color:rgb(242, 169, 113)">S</span> - '
            + totalTestCaseNumS + ' <span style="color:red">F</span> - ' + totalTestCaseNumF;
    }, 100)
</script>
<div style="clear:both"></div>

</body>

</html>